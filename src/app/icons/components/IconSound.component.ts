import { Component, ElementRef, Input, ViewChild } from '@angular/core';

@Component({
  selector: 'icon-sound',
  template: `
    <svg
      #soundIcon
      class="sound-icon"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 354.24 283.34"
      data-sound="true" >
      <g id="vol3">
        <path d="M314,188.75c-13.29,28.18-29.93,53.65-56.08,71.93-8.9,6.22-18,10.9-25.67.47-7.32-9.87-.47-15.7,7.32-23.5,13.45-13.45,30.66-24.53,36.5-44.43,22.32-29.28,21.08-62.06,12.5-95-7.3-28.1-23.85-50.75-47.21-68.21-8.05-6-17.78-12.23-9.23-23.57,8.74-11.6,18.2-5.13,27.19,1.39,50.52,36.64,74.51,103.21,58.89,163.9C316.75,177.36,315.4,183.06,314,188.75Z" />
      </g>
      <g id="vol2">
        <path d="M258.36,183.6c-8.47,11.55-17.6,22.61-28.9,31.46-7.61,6-16.49,13.38-25.66,3.27-9-9.88-1.72-17.83,5.45-25.07,39.41-28.42,42.47-82.1,6.52-115.33-2.87-2.65-6.12-4.91-9.21-7.33-7.43-5.8-9-13.28-3.5-20.57s12.81-6.78,20.84-2.14c37.47,21.67,55.61,74.36,40.54,119.21C262.57,172.65,260.39,178.1,258.36,183.6Z" />
      </g>
      <g id="vol1">
        <path d="M187.24,178.6h-6.4c-14.22-7.26-15.58-15.49-3.44-26.81,14.16-13.21,14.14-22.84.23-35.95-7-6.6-12.17-13.14-4.88-21.47,7.51-8.58,16.36-5.54,24.38.46C226.75,117,222,156.9,187.24,178.6Z" />
      </g>
      <g id="horn">
        <path d="M144.21,49.83c0-3.69-.08-8.28-.12-12a16.79,16.79,0,0,0-8.46-8.45,16.53,16.53,0,0,0-7.71.05,18.55,18.55,0,0,0-9.28,6.22c-5.23,6-22.25,22.74-45.8,45.71a2.32,2.32,0,0,1-.73.86,2.68,2.68,0,0,1-1.69.43c-1.29-.06-22.4-.11-51.48-.18a17.33,17.33,0,0,0-9.25,1.1,15.28,15.28,0,0,0-3.06,1.75,18,18,0,0,0-4.89,6.21C.47,94.23-.08,109.82.31,133.6H.14c-.42,24.33.12,40.33,1.41,43a18,18,0,0,0,4.89,6.21A14.78,14.78,0,0,0,9.5,184.6a17.24,17.24,0,0,0,9.25,1.1c29.09-.07,50.2-.12,51.48-.18a2.75,2.75,0,0,1,1.69.43,2.28,2.28,0,0,1,.73.87c23.56,23,40.57,39.67,45.8,45.7a18.6,18.6,0,0,0,9.28,6.22,16.58,16.58,0,0,0,7.72,0,16.83,16.83,0,0,0,8.46-8.45c0-3.7.08-8.29.11-12q.39-42.37.51-84.76h.19Q144.58,91.71,144.21,49.83Z" />
      </g>
    </svg>`,
  styles: [`
    .sound-icon {
      width: 100%;
      height: 100%;
      #horn,#vol1,#vol2,#vol3 {
        transition: transform, opacity 350ms cubic-bezier(1, -0.32, 0, 1.44);
      }
      #horn {transform-origin: center center;}
      #vol1 {transition-delay: 0ms;}
      #vol2 {transition-delay: 100ms;}
      #vol3 {transition-delay: 200ms;}
    }
    .sound-icon[data-sound="false"] {
      #horn {
        transform: translateX(25%) scale(1.2);
        transition-delay: 400ms;
      }
      #vol1,#vol2,#vol3 {opacity: 0;}
      #vol1 {transition-delay: 200ms;}
      #vol2 {transition-delay: 100ms;}
      #vol3 {transition-delay: 0ms;}
    }
  `]
})

export class IconSoundComponent {

  @ViewChild('soundIcon') refSoundIcon!: ElementRef<SVGElement>

  @Input() set _isOn(isOn: boolean) {
    setTimeout(
      () => this.refSoundIcon.nativeElement
        .setAttribute('data-sound', `${!isOn}`)
      , 0
    );
  }

}
